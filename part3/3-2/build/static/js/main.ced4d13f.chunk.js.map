{"version":3,"sources":["components/PersonForm.js","components/Persons.js","components/Fillter.js","api/index.js","App.js","index.js"],"names":["PersonForm","props","onInput","e","setName","target","value","setNumber","type","onClick","onSubmit","Persons","personList","list","map","row","i","key","name","number","onRemove","id","Fillter","onSearch","baseURL","getPerson","a","requst","axios","get","r","data","createPerson","params","post","removePerson","delete","updatePerson","put","App","useState","persons","setPersons","searchPerson","setSearch","newName","setNewName","newNumber","setNewNumber","useEffect","then","catch","err","console","log","val","searchList","forEach","reg","RegExp","match","concat","handleSearch","preventDefault","person","find","window","confirm","item","alert","handleClick","findIndex","slice","handleRemove","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.ced4d13f.chunk.js","sourcesContent":["import React from 'react'\n\nconst PersonForm = (props) => {\n  return (\n    <form>\n      <div>\n        name:{' '}\n        <input\n          onInput={(e) => {\n            props.setName(e.target.value)\n          }}\n        />\n      </div>\n      <div>\n        number:{' '}\n        <input\n          onInput={(e) => {\n            props.setNumber(e.target.value)\n          }}\n        />\n      </div>\n      <div>\n        <button type=\"submit\" onClick={(e) => props.onSubmit(e)}>\n          add\n        </button>\n      </div>\n    </form>\n  )\n}\n\nexport default PersonForm\n","import React from 'react'\n\nconst Persons = (props) => {\n  const personList = props.list.map((row, i) => {\n    return (\n      <p key={i}>\n        {row.name} {row.number} <button onClick={() => props.onRemove(row.id)}>删除</button>\n      </p>\n    )\n  })\n  return <div>{personList}</div>\n}\n\nexport default Persons\n","import React from 'react'\n\nconst Fillter = (props) => {\n  return (\n    <div>\n      Search:{' '}\n      <input\n        onInput={(e) => {\n          props.onSearch(e.target.value)\n        }}\n      />\n    </div>\n  )\n}\n\nexport default Fillter\n","import axios from 'axios'\n\nconst baseURL = '/api/persons'\n\nexport const getPerson = async () => {\n  const requst = axios.get(`${baseURL}`)\n  const r = await requst\n  return r.data\n}\n\nexport const createPerson = async (params) => {\n  const requst = axios.post(`${baseURL}`, params)\n  const r = await requst\n  return r.data\n}\n\nexport const removePerson = async (id) => {\n  const requst = axios.delete(`${baseURL}/${id}`)\n  const r = await requst\n  return r.data\n}\n\nexport const updatePerson = async (params) => {\n  const requst = axios.put(`${baseURL}/${params.id}`, params)\n  const r = await requst\n  return r.data\n}\n","import React, { useState, useEffect } from 'react'\n\nimport PersonForm from './components/PersonForm'\nimport Persons from './components/Persons'\nimport Fillter from './components/Fillter'\n\nimport { getPerson, createPerson, removePerson, updatePerson } from './api/index'\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [searchPerson, setSearch] = useState(persons)\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n\n  useEffect(() => {\n    getPerson()\n      .then((data) => {\n        setPersons(data)\n        setSearch(data)\n      })\n      .catch((err) => {\n        console.log(err)\n      })\n  }, [])\n\n  const handleClick = (e) => {\n    e.preventDefault()\n\n    if (!newName || !newNumber) {\n      alert('姓名或号码不能为空。')\n      return\n    }\n\n    let person = { name: newName, number: newNumber }\n\n    const row = persons.find((row) => {\n      return row.name === newName\n    })\n\n    if (row) {\n      if (window.confirm(newName + ' 已存在。继续上传会更改number。')) {\n        person = { ...row, ...person }\n        updatePerson(person)\n          .then((r) => {\n            setSearch(persons.map((item) => (item.id === row.id ? r : item)))\n            setPersons(persons.map((item) => (item.id === row.id ? r : item)))\n          })\n          .catch((err) => {\n            console.log(err)\n          })\n      }\n    } else {\n      createPerson(person)\n        .then((r) => {\n          setSearch(persons.concat(r))\n          setPersons(persons.concat(r))\n        })\n        .catch((err) => {\n          console.log(err)\n        })\n    }\n  }\n\n  const handleSearch = (val) => {\n    let searchList = []\n    persons.forEach((row) => {\n      const reg = new RegExp(val, 'i')\n      if (row.name.match(reg)) {\n        searchList = searchList.concat(row)\n      }\n    })\n    setSearch(searchList)\n  }\n\n  const handleRemove = (id) => {\n    if (window.confirm('确认删除吗？')) {\n      removePerson(id)\n        .then((r) => {\n          const i = persons.findIndex((row) => {\n            return row.id === id\n          })\n          setPersons(persons.slice(0, i).concat(persons.slice(i + 1)))\n          setSearch(persons.slice(0, i).concat(persons.slice(i + 1)))\n        })\n        .catch((err) => {\n          console.log(err)\n        })\n    }\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Fillter onSearch={(val) => handleSearch(val)} />\n      <h3>add a new</h3>\n      <PersonForm setName={(val) => setNewName(val)} setNumber={(val) => setNewNumber(val)} onSubmit={(e) => handleClick(e)} />\n      <h3>Numbers</h3>\n      <Persons list={searchPerson} onRemove={(id) => handleRemove(id)} />\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}